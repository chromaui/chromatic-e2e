import { test, expect } from '../src';

const externalImg =
  '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';

// domain of external image in test (to archive)
test.use({ allowedArchiveDomains: ['some.external'] });

test('asset paths', async ({ page }) => {
  // mock the external image (which we'll archive)
  await page.route('https://some.external/domain/image.png', async (route) => {
    await route.fulfill({ body: Buffer.from(externalImg, 'base64') });
  });

  await page.goto('/asset-paths/');
});
